<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>CollineVerdi ‚Ä¢ Bottega Agricola</title>

  <!-- Se i file sono in: src/main/resources/static/assets/store.css -->
  <link rel="stylesheet" href="/assets/store.css">
</head>
<body>

<header class="topbar">
  <div class="brand">
    <button class="hamb" id="btnMenu" aria-label="menu">‚ò∞</button>
    <div class="logoMark">üåø</div>
    <div>
      <div class="brandName">CollineVerdi</div>
      <div class="brandSub">Bottega Agricola ‚Ä¢ Filiera Locale</div>
    </div>
  </div>

  <nav class="nav" id="nav">
    <a href="#home" class="navLink active" data-tab="home">HOME</a>
    <a href="#shop" class="navLink" data-tab="shop">SHOP</a>
    <a href="#chi" class="navLink" data-tab="about">CHI SIAMO</a>
    <a href="#contatti" class="navLink" data-tab="contact">CONTATTACI</a>
    <a href="#ordini" class="navLink" data-tab="orders">ORDINI</a>
  </nav>

  <div class="actions">
    <button class="iconBtn" id="btnAccount" title="Account">üë§</button>
    <button class="iconBtn" id="btnCart" title="Carrello">
      üõí <span class="badge" id="cartCount">0</span>
    </button>
  </div>
</header>

<!-- HERO -->
<section class="hero" id="tab_home">
  <div class="heroSlide" id="heroSlide">
    <div class="heroOverlay">
      <div class="heroKicker">Prodotti autentici, filiera tracciata</div>
      <h1 class="heroTitle">Dal produttore a casa tua</h1>
      <p class="heroText">
        Selezioniamo piccoli produttori locali: olio, miele, conserve, formaggi e box stagionali.
      </p>
      <div class="heroBtns">
        <button class="btn primary" id="goShop">Vai allo Shop</button>
        <button class="btn" id="goAbout">Scopri chi siamo</button>
      </div>
      <div class="heroDots" id="heroDots"></div>
    </div>

    <button class="heroNav left" id="heroPrev" aria-label="prev">‚Äπ</button>
    <button class="heroNav right" id="heroNext" aria-label="next">‚Ä∫</button>
  </div>
</section>

<!-- SHOP -->
<section class="section hidden" id="tab_shop">
  <div class="shopLayout">

    <aside class="filters" id="filters">
      <div class="filterTitle">Filtro Categoria</div>
      <div class="filterList" id="catList"></div>

      <div class="filterTitle" style="margin-top:18px;">Ricerca</div>
      <input class="input" id="q" placeholder="Cerca (es: olio, miele...)">

      <div class="filterTitle" style="margin-top:18px;">Ordina</div>
      <select class="input" id="sort">
        <option value="relevance">Rilevanza</option>
        <option value="priceAsc">Prezzo crescente</option>
        <option value="priceDesc">Prezzo decrescente</option>
        <option value="stockDesc">Disponibilit√†</option>
      </select>

      <button class="btn wide" id="btnRefresh">Aggiorna</button>

      <div class="note" id="shopNote">
        Carichiamo gli annunci da <b>/api/marketplace/annunci</b>.
      </div>
    </aside>

    <main class="productsArea">
      <div class="shopHeader">
        <h2>Tutti i Prodotti</h2>
        <div class="rightTools">
          <span class="pill" id="authPill">Non autenticato</span>
          <span class="pill">Base: <span id="baseUrlLabel"></span></span>
        </div>
      </div>

      <div class="grid" id="grid"></div>
      <div class="empty hidden" id="empty">Nessun prodotto trovato.</div>
    </main>

  </div>
</section>

<!-- ABOUT -->
<section class="section hidden" id="tab_about">
  <div class="content">
    <h2>Chi siamo</h2>
    <p>
      CollineVerdi √® una bottega agricola digitale: valorizziamo le aziende locali e rendiamo chiara la tracciabilit√†.
    </p>
    <div class="cards3">
      <div class="card">
        <div class="cardT">üå± Filiera</div>
        <div class="cardS">Dati su produttore, trasformazioni, certificazioni.</div>
      </div>
      <div class="card">
        <div class="cardT">üöö Consegna</div>
        <div class="cardS">Ordini gestiti con stati e spedizione.</div>
      </div>
      <div class="card">
        <div class="cardT">‚≠ê Recensioni</div>
        <div class="cardS">Valutazioni reali dagli acquirenti.</div>
      </div>
    </div>
  </div>
</section>

<!-- CONTACT -->
<section class="section hidden" id="tab_contact">
  <div class="content">
    <h2>Contattaci</h2>
    <p>Assistenza ordini, rimborsi e informazioni aziende.</p>
    <div class="cards3">
      <div class="card">
        <div class="cardT">üìç Territorio</div>
        <div class="cardS">Filiera comunale e produttori selezionati.</div>
      </div>
      <div class="card">
        <div class="cardT">‚úâÔ∏è Email</div>
        <div class="cardS">support@collineverdi.local</div>
      </div>
      <div class="card">
        <div class="cardT">‚òéÔ∏è Telefono</div>
        <div class="cardS">+39 000 000 000</div>
      </div>
    </div>
  </div>
</section>

<!-- ORDERS -->
<section class="section hidden" id="tab_orders">
  <div class="content">
    <div class="rowBetween">
      <h2>I tuoi ordini</h2>
      <div class="row">
        <input class="input small" id="buyerId" placeholder="Acquirente ID">
        <button class="btn" id="btnLoadOrders">Carica</button>
      </div>
    </div>

    <div class="note">
      Endpoint: <b>GET /api/ordini/acquirente/{acquirenteId}</b>.
    </div>

    <div class="ordersList" id="ordersList"></div>
    <div class="empty hidden" id="ordersEmpty">Nessun ordine trovato.</div>
  </div>
</section>

<!-- CART DRAWER -->
<div class="drawer hidden" id="cartDrawer">
  <div class="drawerPanel">
    <div class="drawerHead">
      <div>
        <div class="drawerTitle">Carrello</div>
        <div class="drawerSub" id="cartSub">‚Äî</div>
      </div>
      <button class="iconBtn" id="btnCloseCart">‚úï</button>
    </div>

    <div class="drawerBody" id="cartItems"></div>

    <div class="drawerFoot">
      <div class="totRow">
        <div>
          <div class="muted">Totale stimato</div>
          <div class="total" id="cartTotal">‚Ç¨ 0.00</div>
        </div>
        <div class="row">
          <button class="btn" id="btnCheckout">Checkout</button>
          <button class="btn primary" id="btnPay">Paga</button>
        </div>
      </div>

      <div class="note">
        Carrello: <b>POST /api/carrello/{id}/items</b>, <b>POST /checkout</b>, <b>POST /paga</b>
      </div>

      <div class="row">
        <select class="input" id="payMethod">
          <option value="CARTA">CARTA</option>
          <option value="PAYPAL">PAYPAL</option>
          <option value="BONIFICO">BONIFICO</option>
        </select>
        <input class="input" id="lastOrderId" placeholder="Ordine ID (dopo checkout)">
      </div>
    </div>
  </div>
</div>

<!-- ACCOUNT MODAL -->
<div class="modal hidden" id="accountModal">
  <div class="modalBox">
    <div class="modalHead">
      <div>
        <div class="modalTitle">Account Acquirente</div>
        <div class="modalSub">Registrazione e login (token JWT)</div>
      </div>
      <button class="iconBtn" id="btnCloseAccount">‚úï</button>
    </div>

    <div class="tabs">
      <button class="tabBtn active" data-tab="login">Login</button>
      <button class="tabBtn" data-tab="register">Registrazione</button>
      <button class="tabBtn" data-tab="settings">Impostazioni</button>
    </div>

    <div class="tabPane" id="pane_login">
      <div class="grid2">
        <div class="field">
          <label>Username</label>
          <input class="input" id="loginUser" placeholder="username">
        </div>
        <div class="field">
          <label>Password</label>
          <input class="input" id="loginPass" type="password" placeholder="password">
        </div>
      </div>
      <button class="btn primary wide" id="btnLogin">Entra</button>
      <div class="msg" id="loginMsg"></div>
      <div class="note">
        Login: <b>POST /auth/login</b>.
      </div>
    </div>

    <div class="tabPane hidden" id="pane_register">
      <div class="grid2">
        <div class="field">
          <label>Username</label>
          <input class="input" id="regUser" placeholder="mario">
        </div>
        <div class="field">
          <label>Email</label>
          <input class="input" id="regEmail" placeholder="mario@mail.it">
        </div>
        <div class="field">
          <label>Password</label>
          <input class="input" id="regPass" type="password" placeholder="password">
        </div>
        <div class="field">
          <label>Ripeti Password</label>
          <input class="input" id="regPass2" type="password" placeholder="password">
        </div>
      </div>
      <button class="btn primary wide" id="btnRegister">Crea account</button>
      <div class="msg" id="regMsg"></div>
      <div class="note">
        Registrazione: <b>POST /api/acquirenti</b>.
      </div>
    </div>

    <div class="tabPane hidden" id="pane_settings">
      <div class="grid2">
        <div class="field">
          <label>Base URL</label>
          <input class="input" id="baseUrl" placeholder="http://localhost:8080">
        </div>
        <div class="field">
          <label>Acquirente ID</label>
          <input class="input" id="buyerIdSet" placeholder="1">
        </div>
      </div>
      <button class="btn wide" id="btnSaveSettings">Salva</button>

      <div class="field" style="margin-top:12px;">
        <label>Token (salvato nel browser)</label>
        <textarea class="input" id="tokenBox" style="min-height:120px;"></textarea>
      </div>
      <div class="row">
        <button class="btn" id="btnUseToken">Usa token</button>
        <button class="btn danger" id="btnClearToken">Rimuovi token</button>
      </div>

      <div class="note">
        Questa pagina usa <b>fetch()</b> e salva token in <b>localStorage</b>.
      </div>
    </div>
  </div>
</div>

<!-- Se il file √® in: src/main/resources/static/assets/store.js -->
<script defer src="/assets/store.js"></script>
</body>
</html>
